% VARIABLES %%%
\def\theme{Périmètres, aires, volumes}
% \def\date{date}
%%%%%%%%%%%%%%%

% DEFINITIONS %
\def\md{\ensuremath{\meter^2}}
\def\mt{\ensuremath{\meter^3}}
\def\Lt{\ensuremath{\liter}}
\def\ul{\ensuremath{\textrm{ul}}}
\def\ua{\ensuremath{\textrm{ua}}}
\def\uv{\ensuremath{\textrm{uv}}}

\def\Per{\ensuremath{\mathcal{P}}}
\def\A{\ensuremath{\mathcal{A}}}
\def\V{\ensuremath{\mathcal{V}}}
\def\B{\ensuremath{\mathcal{B}}}
\def\C{\ensuremath{\mathcal{C}}}

\def\u{\vect{u}}
\def\v{\vect{v}}

\def\cbmath{\href{https://docplayer.fr/210413521-Lecon-n-o-18-perimetres-aires-volumes-capes-session-cbmaths-cbmaths-fr-derniere-mise-a-jour-2-avril-2021.html}{CBMaths.fr}}
\def\jean{\href{https://www.mathenjeans.fr/sites/default/files/comptes-rendus/polygones_-_saint_dominique_nancy.pdf}{mathenjeans.fr}}

\newcommand{\drawArea}[1][blue]{\fill[fill = #1, opacity = 0.2]}
%%%%%%%%%%%%%%

\setboolean{subsectionInOutline}{true}
% \setboolean{outline}{true}
% \setboolean{demonstration}{false}

% \setboolean{showRef}{false}

\hbox{}
\leconInfo{
    \ilink{Cycle 3}
    \ilink{Cycle 4}
    \ilink{Terminale Option Spécialité}
    \ilink{Terminale Option Complémentaire}
    \ilink{Terminale Technologique}
} % Niveaux
[\item mesures de longueurs
\item transformation géométrique
\item continuité] % Prérequis
[] % Thèmes
[] % Motivation

\section{Mesures de longueurs}
\subsection{Définitions}

\df{Perimètre}{
    Le \textbf{périmètre} (\Per) d'une figure est la longueur de son contour.
}

\rmk{Unité de longueur}{
    Le périmètre se mesure en \textbf{unité de longueur} \ul{} (de manière usuelle en mètre \meter).\\
    Deux unités de longueur consécutives sont 10 fois plus grande ou plus petite les unes par rapport aux autres.
}

\subsection{Périmètre d'un polygone}

\pr{Perimètre du polygone}{
    Le périmètre d'un polygone est la somme des longueur de ses côtés
}

\pr{Perimètre de polygones particuliers}{
    \begin{itemize}[wide=0pt, leftmargin=*]
        \item Carré ou losange de côté $c$: $\Per = 4c$
        \item Rectangle de longueur $L$ et largeur $l$: $\Per = 2L +2l$
        \item Triangle équilatéral de côté $c$: $\Per = 3c$
    \end{itemize}
}

\subsection{Périmètre d'un cercle et définition du nombre pi}

\df{Circonférence}{
    La \textbf{circonférence} (\C) est la longueur d'un cercle.
}

\df{Constante d'Archimède (Pi)}{
    $\pi$ est le rapport de la circonférence d'un cercle à son diamètre.
    \begin{equation*}
        \pi \approx 3,141592653589793
    \end{equation*}
}

\mthd{d'Archimède (Approximation de Pi)}{
    On encadre $\pi$ par le demi périmètres de polygones réguliers inscrits et circonscrits à un cercle de rayon $1$.
    \href{https://www.geogebra.org/m/yqhfdqgg}{$\rightarrow$ Activité géogebra}
}

\demo{}{
    A l'étape $n\in[3,+\infty]$ on note $a_n$ l'angle des $2n$ triangles rectangles ayant pour sommet le centre du cercle,
    $i_n$ et $c_n$ les côtés des polygones inscrits et circonscrits
    et $U_n$ et $V_n$ les périmètres des polygones inscrits et circonscrits.
    On a:
    \begin{align*}
        a_n &= \frac{360}{2n} = \frac{180}{n}\\
        \ior \sin(a_n) &= \frac{\textrm{opposé}}{\textrm{hypothénus}}
        = \frac{i_n / 2}{\textrm{rayon}}
        = \frac{i_n / 2}{\textrm{1}}
        = \frac{i_n}{2}\\
        \iet \tan(a_n) &= \frac{\textrm{opposé}}{\textrm{adjacent}}
        = \frac{c_n / 2}{\textrm{rayon}}
        = \frac{c_n / 2}{\textrm{1}}
        = \frac{c_n}{2}
        \ior U_n &= n \times i_n = 2 n \sin(a_n)
        \iet V_n &= n \times c_n = 2 n \tan(a_n)
        \ior \frac{U_n}{2} &\leqslant \pi \leqslant \frac{V_n}{2}
        \ialors n \sin(\frac{180}{n}) &\leqslant \pi \leqslant n \tan(\frac{180}{n})
    \end{align*}
}[\href{https://weblaperouse.ac-noumea.nc/IMG/pdf/9-tpe-approximation-archimede.pdf}{Rodrigue LEBAILLY et Romain LEROY}]

\rmk{Formule de la circonférence}{
    On a alors la circonférence d'un cercle de rayon $r$ : $\mathcal{C} = 2 \pi r$.
}

\pr{Longueur d'arc}{
    \def\angle{30} % Define the angle size
    \def\r{4}
    \ctikz{
        \tkzDefPoint(0,0){A}
        \tkzDefPoint(\r,0){B}
        \tkzDefShiftPoint[A](\angle:\r){C} % Adjust the angle for gamma and the length for side 'c'
        \draw[very thick] (B)--(A)--(C);
        \tkzDrawArc[Blue](A,B)(C) % Draw arc from B to C centered at A
        % %
        \tkzMarkAngle[Red,size=0.7cm,opacity=1](B,A,C) % Mark angle BAC
        \tkzLabelAngle[Red, pos=1](B,A,C){$\theta$} % Label angle BAC
        % %
        \tkzLabelSegment[below](A,B){$r$} % Label segment AB as r
        \tkzLabelArc[Blue, right](A,B,C){$r\theta$} % Label the arc from B to C as rθ
    }
}

\demo{}{
    L'arc est une section $\frac{\theta}{2\pi}$ de la circonférence.\\
    Alors la longueur d'arc est: $2\pi r \times \frac{\theta}{2\pi} = r \theta$.
}

\section{Mesures d'aires}
\subsection{Définitions}
\subsubsection{Définition générale}

\df{Aire}{
    L'\textbf{aire} (\A) d'une figure est la mesure de sa surface.
}

\df{Unité d'aire}{
    L'aire se mesure en \textbf{unité d'aire} $\ua = \ul^2$ (de manière usuelle en mètre carré \md).\\
    1 \ua{} correspond à la mesure de surface d'un carré de côté 1 \ul.
}

\rmk{Unités d'aire consécutives}{
    Deux unités d'aire consécutives sont 100 fois plus grande ou petites les unes par rapport aux autres.
}

\subsubsection{Aire sous la courbe à l'aide du calcul intégral}

\hint{
    Soit $f$, fonction continue et positive sur $[a,b]$ et \C{} sa courbe représentative.
}

\df{Aire sous la courbe}{
    L'\textbf{aire sous la courbe} sur $[a,b]$ est l'aire du domaine délimité par;
    l'axe des abscisses, la courbe \C{} et les droites d'équation $x=a$ et $x=b$.\\
    On note $\int_{a}^{b}f(x)dx$ et appelle \textbf{intégrale} de $f$ entre $a$ et $b$ cette aire. 
}[\cbmath]

\subsection{Aires d'un polygone, technique de  découpages et recollements}
\subsubsection{Comparaison d'aires}
\pr{Isométrie}{
    Le périmètre et l'aire sont invariants par isométrie.
}

\pr{Homothétie}{
    Pour une homothétie de rapport $k$, les périmètres sont multiplié par $|k|$,
    et les aires par $k^2$.
}

\pr{Additivité des aires}{
    L'aire de l'union des surface $A$ et $B$ disjointes, est égale à la somme de leurs aires.
}

\cor{Relation de Chalses}{
    Soit $c\in[a,b]$, on a:
    \begin{equation*}
        \int_{a}^{b}f(x)dx = \int_{a}^{c}f(x)dx + \int_{c}^{b}f(x)dx
    \end{equation*}
}

\df{Comparaison d'aires}{
    On dit que deux figure ont des aires équivalentes si en découpant l'une d'entre elle,
    on peut recomposer l'autre.
}[\cbmath]

\rmk{Mesure d'aire}{
    On mesure l'aire en comparaison au carré de côté \ul.
}

\subsubsection{Découpages et recollements de polygones}

\pr{Découpage de polygone}{
    On peut toujours découper un polygone en triangles.
}

\demo{}{
    \def\polygone{
        \tkzDefPoint(0,0){A}
        \tkzDefPoint(1,2){B}
        \tkzDefPoint(1.5,2){C}
        \tkzDefPoint(1.9,1.5){D}
        \tkzDefPoint(2.6,3){E}
        \tkzDefPoint(3,2){F}
        \tkzDefPoint(3,1){G}
        \tkzDefPoint(2,-1){H}
        \draw[blue , thick] (D)--(H);
    }
    \dividePage{On le découper en polygones convexes.
        \begin{center}
            \begin{tikzpicture}
                \polygone
                \draw[very thick] (A)--(B)--(C)--(D)--(E)--(F)--(G)--(H)--cycle;
            \end{tikzpicture}
        \end{center}
    }{Puis on choisit un sommet dans chaque partie convexe et on le relie aux autres.
        \begin{center}
            \begin{tikzpicture}
                \polygone
                \draw[red , thick] (A)--(C);
                \draw[red , thick] (A)--(D);
                \draw[red , thick] (E)--(G);
                \draw[red , thick] (E)--(H);
                \draw[very thick] (A)--(B)--(C)--(D)--(E)--(F)--(G)--(H)--cycle;
            \end{tikzpicture}
        \end{center}
    }
}[\jean]

\pr{Découpage et recollage de triangle en rectangle}{
    On peut toujours découper et recoller un triangle quelconque pour trouver un rectangle de même aire.
}

\demo{Cas sans angle optus}{
    \def\triangle{
        \tkzDefPoint(0,0){A}
        \tkzDefPoint(6,0){B}
        \tkzDefPoint(1.5,3){C}
        \tkzDefLine[perpendicular=through C](A,B) \tkzGetPoint{c} % Définir un point pour la direction de la ligne
        \tkzInterLL(C,c)(A,B) \tkzGetPoint{H} % Intersection de la ligne avec AB
        \draw[thick] (C)--(H);
        \tkzLabelPoints[below](H)
        % Médiatrice CH
        \tkzDefLine[mediator](C,H) \tkzGetPoint{f}
        \tkzDefLine[mediator](H,C) \tkzGetPoint{o}
        \tkzInterLL(o,f)(A,C) \tkzGetPoint{O}
        \tkzInterLL(o,f)(B,C) \tkzGetPoint{F}
        \draw[thick] (O)--(F);
        % \tkzLabelPoints[above left](O)
        % \tkzLabelPoints[above right](F)
        \tkzInterLL(O,F)(C,H) \tkzGetPoint{I}
        \tkzLabelPoints[below right](I)
        % Mark
        \tkzMarkRightAngle[blue](A,H,C)
        \tkzMarkRightAngle[blue](O,I,H)
        \draw[very thick] (A)--(B)--(C)--cycle;
        \tkzMarkSegment[blue,pos=.5,mark=|](C,I)
        \tkzMarkSegment[blue,pos=.5,mark=|](H,I)
    }
    \dividePage{
        \begin{center}
            \begin{tikzpicture}[scale=1]
                \triangle
            \end{tikzpicture}
        \end{center}
    }{
        \begin{center}
            \begin{tikzpicture}[scale=1]
                \triangle
                % D et E
                \tkzDefLine[perpendicular=through A](O,F) \tkzGetPoint{d}
                \tkzInterLL(d,A)(O,F) \tkzGetPoint{D}
                \tkzDefLine[perpendicular=through B](O,F) \tkzGetPoint{e}\tkzLabelPoints[below right](I)
                \tkzInterLL(e,B)(O,F) \tkzGetPoint{E}
                % \tkzLabelPoints[right](E)
                % \tkzLabelPoints[left](D)
                \draw[thick] (E)--(D);
                % Trianlges
                \drawArea[red] (A)--(D)--(O)--cycle;
                \drawArea[red] (C)--(I)--(O)--cycle;
                \drawArea (B)--(E)--(F)--cycle;
                \drawArea (C)--(I)--(F)--cycle;
            \end{tikzpicture}
        \end{center}
    }
}[\jean]

\demo{Cas avec un angle optus}{
    \def\h{3}
    \def\b{5}
    \def\defPoints{%
        \tkzDefPoint(0,0){A}
        \tkzDefPoint(\b,0){B}
        \tkzDefPoint(-1.5,\h){C}
        \tkzDefLine[perpendicular=through C](A,B) \tkzGetPoint{c}
        \tkzInterLL(C,c)(A,B) \tkzGetPoint{H}
        \tkzDefPoint(\b,\h){E}
    }
    \dividePage{
        \ctikz{
            \defPoints
            \tkzMarkRightAngle[blue](C,H,A)
            \draw[pattern={north east lines}, pattern color = red, opacity = 0.7] (A) -- (B) -- (C) -- cycle;
            \drawArea (H) -- (B) -- (C);
            \drawArea[red] (E) -- (B) -- (C);
            \draw[very thick] (A) -- (B) -- (C) -- cycle;
            \draw[dashed, thick] (C) -- (H);
            \draw[dotted, thick] (H) -- (B) -- (E) -- (C);
        }
    }{
        \ctikz{
            \defPoints
            \tkzDefPoint(0,\h){D}
            \draw[thick] (A) -- (B) -- (C) -- cycle;
            \drawArea (C) -- (D) -- (A);
            \drawArea[red] (H) -- (C) -- (A);
            \draw[dotted, thick] (H) -- (A);
            \draw[dotted, thick] (C) -- (D);
            \draw[dashed, thick] (C) -- (H);
            \draw[very thick, pattern={north east lines}, pattern color = red, opacity = 0.7] (A) -- (D) -- (E) -- (B) -- cycle;
        }
    } 
}[\href{http://www.debart.fr/college/aire_triangle.html}{debart.fr}]

\pr{Découpage et recollage de rectangle à un carré de même aire}{
    Pour un rectangle de longueur $L$ et largeur $l$.\\
    Si $L \geqslant \frac{\sqrt{lL}}{2}$ alors on peut découper et recoller le rectangle pour trouver un carré de même aire.\\
    Sinon il est possible d'au préalable,
    découper ce rectangle en rectangles de longueurs plus petites.
}

\demo{}{
    \def\lenght{6}
    \def\width{2}
    \def\defRect{%
        \tkzDefPoint(0,0){A}
        \tkzDefPoint(0,\width){B}
        \tkzDefPoint(\lenght,\width){C}
        \tkzDefPoint(\lenght,0){D}
    }
    \def\drawRect{\draw[very thick] (A)--(B)--(C)--(D)--cycle;}
    \begin{center}
        \begin{tikzpicture}
            \defRect
            \tkzDefPoint(-\width,0){E}
            \tkzDefMidPoint(E,D) \tkzGetPoint{F}
            \draw[dashed, very thick] (A)--(E);
            \drawRect
            \tkzDrawPoints(F)
            \tkzDrawPoints(E)
            % \tkzCalcLength(F,E) \tkzGetLength{rayon}
            % \tkzDefCircle[R](F,\rayon)
            \tkzInterLC(A,B)(F,E) \tkzGetPoints{G}{H}
            \tkzDrawPoint(G)
            % \draw[dashed, very thick] (B)--(G);
            \tkzDrawCircle[very thick, dotted](F,E)
            \tkzCalcLength(A,G) \tkzGetLength{cote}
            \tkzDefPoint(\cote,0){H}
            \tkzDefPoint(\cote,\cote){I}
            \tkzInterLL(G,D)(B,C) \tkzGetPoint{X}
            \tkzInterLL(G,D)(I,H) \tkzGetPoint{Y}
            \draw[red, thick] (A)--(G)--(I)--(H)--cycle;
            \tkzMarkSegment[blue,pos=.5,mark=|](A,E)
            \tkzMarkSegment[blue,pos=.5,mark=|](A,B)
            \draw[dashed] (G)--(D);
            \drawArea (G)--(I)--(Y)--cycle;
            \drawArea (D)--(C)--(X)--cycle;
            \drawArea[red] (G)--(B)--(X)--cycle;
            \drawArea[red] (D)--(H)--(Y)--cycle;
            % \draw[dotted] (F) circle(\rayon);
        \end{tikzpicture}
    \end{center}
}[\href{https://www.mathenjeans.fr/sites/default/files/comptes-rendus/recollons_les_morceaux_guy_moquet_chateaubriant_2013.pdf}{BOUDET Corentin, TRIMOREAU Vincent, PARIS Nicolas}]

\subsubsection{Encadrer les aires}

\rmk{Encadrer les aires}{
    Pour beaucoup de figure non polygonales il ne sera pas possible de procéder par découpages et recollements.
    On procédera alors à des encadrements d'aires.
}

\mthd{Approximation d'une aire par l'utilisation de suites adjacentes}{
    \def\s{\frac{b-a}{n}}
    Soit $u,v$ deux suites adjacentes tels que pour $n\in\m{N}$:\\
    \begin{align*}
        u_n = \s \sum_{k=0}^{n} f(a+k \s) \;&\et\; v_n = \s \sum_{k=1}^{n} f(a+k \s)\\
        \ona \; \int_{a}^{b} f(x) dx &\in [u_n,v_n]
    \end{align*}
    \href{https://www.geogebra.org/m/bhmjfjhs}{$\rightarrow$ Activité géogebra}
}

\subsection{Formules d'aire pour quelques figures remarquables}
\subsubsection{Aires de polygones remarquables}

\pr{Aires du carré et du rectangle}{
    \begin{itemize}[wide=0pt, leftmargin=*]
        \item Carré de côté $c$ : $\A = c^2$.
        \item Rectangle de longueur $L$ et largeur $l$ : $\A = lL$.
    \end{itemize}
}

\pr{Triangles ou parallélogramme de même base et hauteur}{
    Deux triangles ou parallélogramme de même bases et hauteurs ont la même aires.
}

\demo{}{
    \begin{center}
        \def\b{5}
        \def\h{3}
        \def\xs{5}
        \def\ys{-2.5}
        \begin{tikzpicture}
            % Premier parallélogramme
            \tkzDefPoint(0,0){A}
            \tkzDefPoint(\xs,\h){B}
            \tkzDefPoint(\b+\xs,\h){C}
            \tkzDefPoint(\b,0){D}
            % Deuxième parallélogramm
            \tkzDefPoint(0,0){E}
            \tkzDefPoint(\ys,\h){F}
            \tkzDefPoint(\b+\ys,\h){G}
            \tkzDefPoint(\b,0){H}
            \drawArea (A) -- (B) -- (F) -- cycle;
            \drawArea (C) -- (D) -- (G) -- cycle;
            \draw[thick, dashed] (A) -- (B) -- (C) -- (D) -- cycle;
            \draw[very thick] (E) -- (F) -- (G) -- (H) -- cycle;
        \end{tikzpicture}
    \end{center}
}

\pr{Aires du triangle et du parallélogramme}{
    \begin{itemize}[wide=0pt, leftmargin=*]
        \item Triangle de base $b$ et hauteur $h$ : $\A = \frac{b \times h}{2}$.
        \item Parallèlogramme de base $b$ et hauteur $h$ : $\A = b \times h$.
    \end{itemize}
}

\demo{}{
    \dividePage{
        \ctikz{
            % \usetikzlibrary {patterns,patterns.meta}
            \def\b{5}
            \def\h{3}
            % Définir les points du triangle
            \tkzDefPoint(0,0){A}
            \tkzDefPoint(\b,0){B}
            \tkzDefPoint(1.5,\h){C}
            % Ajouter des étiquettes
            \tkzLabelPoints[below left](A)
            \tkzLabelPoints[below right](B)
            \tkzLabelPoints[above](C)
            %
            \tkzDefPoint(0,\h){D}
            \tkzDefPoint(\b,\h){E}
            %
            % Calculer le pied de la hauteur depuis C sur AB
            \tkzDefPointBy[projection=onto A--B](C) \tkzGetPoint{H}
            \tkzLabelPoints[below](H)
            %
            \draw[dotted, very thick, fill = red, fill opacity = 0.2] (A) -- (D) -- (E) -- (B);
            \draw[pattern={north east lines}, pattern color = blue, opacity = 0.7] (A) -- (B) -- (C) -- cycle;
            \draw[very thick] (A) -- (B) -- (C) -- cycle;
            \draw[dashed, very thick] (C) -- (H);
            % \draw[pattern={Lines[angle=45,distance={3pt/sqrt(2)}]},pattern color=blue] (0,1) rectangle +(1,1);
            \tkzLabelSegment[right](C,H){$h$}
            \tkzLabelSegment[below](A,B){$b$}
            \tkzMarkRightAngle[blue](C,H,A)
        }
    }{
        \begin{align*}
            \color{Red}\A\color{black} = b \times h = 2 \times \color{Blue}\A\color{black}\\
        \end{align*}
    }
}

\hint{
    Soit deux vecteurs \u et \v.
}

\df{Parallélogramme engendré par deux vecteurs}{
    Le \textbf{parallélogramme engendré} par \u et \v est:
    \begin{equation*}
        \{\alpha\u + \beta\v | \alpha,\beta\in[0,1]\}
    \end{equation*}
}

\pr{Aire du parallélogramme engendré}{
    Le parallélogramme engendré par \u et \v a pour aire : $\A = \det(\u,\v)$.
}

\demo{}{
    % Definition of vectors
    \def\xu{3.5}
    \def\yu{1}
    \def\xv{1.25}
    \def\yv{3}
    %
    \def\defvectors{% Origin point
        \coordinate (O) at (0,0);
        %
        % Define endpoints of vectors
        \coordinate (U) at (\xu,\yu);
        \coordinate (V) at (\xv,\yv);
        \coordinate (UV) at ($(\xu,\yu) + (\xv,\yv)$); % Endpoint of u+v
    }
    \def\drawvectors{% Draw vectors
        \draw[-{Stealth[length=3mm]}, thick] (O) -- (U) node[midway, below] {\u};
        \draw[-{Stealth[length=3mm]}, thick] (O) -- (V) node[midway, left] {\v};
        \draw[-{Stealth[length=3mm]}, thick, dashed] (U) -- (UV);
        \draw[-{Stealth[length=3mm]}, thick, dashed] (V) -- (UV);
        %
        % Nodes for vector components on axes
        \node at (\xu, 0) [below] {$x_u$};
        \node at (\xv, 0) [below] {$x_v$};
        \node at (0, \yu) [left] {$y_u$};
        \node at (0, \yv) [left] {$y_v$};
        %
        % Adding ticks for the components
        \draw (\xu,0.1) -- (\xu,-0.1);
        \draw (\xv,0.1) -- (\xv,-0.1);
        \draw (0.1,\yu) -- (-0.1,\yu);
        \draw (0.1,\yv) -- (-0.1,\yv);
    }
    \begin{center}
        \begin{tikzpicture}
            \axis{4}
            \defvectors
            \drawArea (O) -- (U) -- (UV) -- (V) -- cycle;
            \drawvectors
        \end{tikzpicture}
        \begin{tikzpicture}
            \axis{4}
            \defvectors
            \coordinate (Ob) at (0,\yu);
            \coordinate (Ot) at (\xv,\yu);
            \coordinate (Oq) at (\xv,0);
            \coordinate (UVb) at (\xu,\yv);
            \coordinate (Ub) at (\xu,0);
            \coordinate (Vb) at (0,\yv);
            \drawArea (Ob) -- (Ot) -- (Oq) -- (Ub) -- (UVb) -- (Vb) -- cycle;
            \drawvectors
        \end{tikzpicture}
    \end{center}
}[\href{http://www.rozenblum.com/determinant-de-deux-vecteurs-et-aire-du-parallelogramme/}{Henry-Michel Rozenblum}]

\subsubsection{Aire du disque}

\mthd{de Monte-Carlo (Approximation de l'aire du disque)}{
    \begin{algorithm}[H]
        \KwData{$r\in\m{R} \et N\in\m{N}$}
        \KwRes{approximations de l'aire du cercle de rayon $r$.}
        $c \leftarrow 2r$
        On considère une figure constiué d'un carré de côté $c$ dans lequel on place en son centre un cercle de rayon $r$\;
        $n \leftarrow 0$\;
        \Pr{$i$ de $0$ à $N$}{
            Prendre un point $A$ au hasard dans le carré\;
            \Si{$A$ est dans le cercle}{$n \leftarrow n+1$\;}
        }
        \KwRet{$\frac{n}{N} \times c^2$}\;
    \end{algorithm}
}[\href{http://pedagogie.ac-limoges.fr/maths/IMG/pdf/manipulation_aire_disque_methode_de_monte-carlo.pdf}{Académie de limoge}]

\tice{Méthode de Monte-Carlo}{Python}{
    \lstinputlisting[language=Python]{resources/lecons-capes/17/monte-carlo.py}
}

\pr{Aire du disque}{
    L'aire d'un disque de rayon $r$ : $\A = \pi r^2$.
}

\demo{d'Archimède}{
    On découpe un disque en $n\in\m{N}$ secteurs circulaires équivalents.
    En regroupant les secteurs têtes bèches,
    accolé par leur côté rectiligne,
    on obtient une figure d'aire égale.\\
    Quand $n \rightarrow \infty$,
    la figure devient un rectangle,
    on note sa longueur $L$ et sa largeur $l$.\\
    On a:
    \begin{align*}
        \A &= l \times L\\
        \ior 2L = \C &\et L = r\\
        \ialors \A &= \frac{\C}{2} \times r
        = \frac{2\pi r}{2} \times r
        = \pi r^2
    \end{align*}
}[\href{https://blog.maths-en-vrac.fr/2018/07/30/laire-dun-disque-facon-archimede/}{Damien Bouloc}]

\demo{avec une intégrale}{%
    \def\r{4}
    \def\angle{1}
    \def\x{\r * sin(\angle)}
    \def\y{\r * cos(\angle)}
    \dividePage{%
        \ctikz{
            \axis{5}
            \tkzDefPoint(0,0){O}
            \tkzDefPoint(\r,0){A}
            \tkzDefPoint(\x,\y){P}
            \tkzDefPoint(\x,0){X}
            \tkzDefPoint(0,\y){Y}
            \drawArea (A) arc (0:90:\r) -- (O) -- cycle ;
            \draw[thick] (O) -- (P);
            \draw[dashed] (P) -- (X) node[below]{$x$};
            \draw[dashed] (P) -- (Y) node[left]{$y$};
            \tkzLabelSegment[below right](O,P){$r$}
        }
    }{%
        Par le théorème de Pythagore:
        \begin{align*}
            y &= \sqrt{r^2-x^2}\\
            \shortintertext{on pose} f &: x \mapsto \sqrt{r^2-x^2}\\
            \iona \A &= 4 \int_{0}^{r} f(x)dx
            % \ior \sqrt{r^2-x^2} &= r \sqrt{1 - \frac{x^2}{r^2}}\\
            % \shortintertext{et par changement de variable} u = \frac{x}{r} \alors dx = rdu\\
            % \iona 
        \end{align*}
    }
}[\href{https://www.mathweb.fr/euclide/2019/05/18/pourquoi-laire-dun-disque-est-egale-a-pi-r2/}{mathweb.fr}]

\subsection{Utilisation de la notion d'aire pour démontrer des théorèmes de géométrie}
\subsubsection{Théorème de Pythagore}

\thm{de Pythagore}{
    Soit un triangle $ABC$ rectangle en $A$, on a:
    \begin{equation*}
        BC^2 = AB^2 + AC^2
    \end{equation*}
}

\demo{}{
    \def\a{3}
    \def\b{2}
    \def\s{\a+\b}
    \def\defpoints{
        \tkzDefPoint(0,0){A}
        \tkzDefPoint(\s,0){B}
        \tkzDefPoint(\s,\s){C}
        \tkzDefPoint(0,\s){D}
        \tkzDefPoint(\b,0){Ab}
        \tkzDefPoint(\s,\b){Bb}
        \tkzDefPoint(\a,\s){Cb}
        \tkzDefPoint(0,\a){Db}
    }
    \def\drawSquare{\draw[very thick] (A) -- (B) -- (C) -- (D) -- cycle;}
    \dividePage{
        \ctikz{
            \defpoints
            \drawArea (A) -- (Ab) -- (Db);
            \drawArea (B) -- (Bb) -- (Ab);
            \drawArea (C) -- (Cb) -- (Bb);
            \drawArea (D) -- (Db) -- (Cb);
            \draw[dotted, thick] (Ab) -- (Bb) -- (Cb) -- (Db) -- cycle;
            \drawSquare
            \tkzMarkSegment[blue,pos=.5,mark=|](A,Ab)
            \tkzMarkSegment[blue,pos=.5,mark=|](B,Bb)
            \tkzMarkSegment[blue,pos=.5,mark=|](C,Cb)
            \tkzMarkSegment[blue,pos=.5,mark=|](D,Db)
            \tkzMarkSegment[blue,pos=.5,mark=o](A,Db)
            \tkzMarkSegment[blue,pos=.5,mark=o](B,Ab)
            \tkzMarkSegment[blue,pos=.5,mark=o](C,Bb)
            \tkzMarkSegment[blue,pos=.5,mark=o](D,Cb)
            \tkzLabelSegment[left](A,Db){$a$}
            \tkzLabelSegment[left](D,Db){$b$}
            \tkzLabelSegment[above right](Db,Ab){$c$}
        }
    }{%
        \ctikz{
            \defpoints
            \tkzDefPoint(\b,\a){Ac}
            \tkzDefPoint(\b,\s){Dq}
            \tkzDefPoint(\s,\a){Cq}
            \drawArea (A) -- (Ab) -- (Db);
            \drawArea (Ac) -- (Ab) -- (Db);
            \drawArea (C) -- (Dq) -- (Cq);
            \drawArea (Ac) -- (Dq) -- (Cq);
            \draw[dotted, thick] (Db) -- (Cq);
            \draw[dotted, thick] (Ab) -- (Dq);
            \draw[dotted, thick] (Ab) -- (Db);
            \draw[dotted, thick] (Dq) -- (Cq);
            \drawSquare
            % \tkzMarkSegment[blue,pos=.5,mark=|](A,Ab)
            \tkzMarkSegment[blue,pos=.5,mark=|](Db,Ac)
            \tkzMarkSegment[blue,pos=.5,mark=|](Dq,Ac)
            % \tkzMarkSegment[blue,pos=.5,mark=|](C,Cq)
            % \tkzMarkSegment[blue,pos=.5,mark=o](A,Db)
            \tkzMarkSegment[blue,pos=.5,mark=o](Ab,Ac)
            \tkzMarkSegment[blue,pos=.5,mark=o](Ac,Cq)
            % \tkzMarkSegment[blue,pos=.5,mark=o](Dq,C)
        }
    }
}

\subsubsection{Théorème de Thalès}
\lem{des bases}{
    Soit un triangle $ABC$ et soit $M$ un point du segment $[BC]$.\\
    \begin{align*}
        \frac{\A_{ABM}}{\A_{ACM}} = \frac{BM}{CM}
    \end{align*}
}

\demo{}{
    Soit $h$ la hauteur issue de $ABC$ issue de $A$.
    On a:
    \begin{align*}
        \frac{\A_{ABM}}{\A_{ACM}} = \frac{\frac{BM \times h}{2}}{\frac{CM \times h}{2}} = \frac{BM}{CM}
    \end{align*}
}[\href{https://le-castillon-le-pieux.college.ac-normandie.fr/IMG/pdf/Thales_-_Demonstrations.pdf}{Collège Le Castillon}]

\thm{de Thalès}{
    Soit un triangle $ABC$ et soient $M$ sur $(BC)$ et $N$ sur $(AC)$ tel que:
    $(MN)$ soit parallèle à $(BC)$.
    \begin{align*}
        \frac{AM}{AB} = \frac{AN}{AC}
    \end{align*}
}

\demo{}{
    \def\defTriangle{
        \tkzDefPoint(1,3){A}
        \tkzDefPoint(0,0){B}
        \tkzDefPoint(6,0){C}
        \tkzDefBarycentricPoint(A=1,B=1.5)\tkzGetPoint{M}
        \tkzDefBarycentricPoint(A=1,C=1.5)\tkzGetPoint{N}
    }
    \def\drawTriangle{
        \draw[very thick] (A) -- (B) -- (C) -- cycle;
        \draw[thick] (M) -- (N);
    }
    \def\labelPoints{
        \tkzLabelPoints[above](A)
        \tkzLabelPoints[below left](B)
        \tkzLabelPoints[below right](C)
        \tkzLabelPoints[above left](M)
        \tkzLabelPoints[above right](N)
    }
    \dividePage{
        \ctikz{
            \defTriangle
            \drawArea (M) -- (N) -- (C);
            \drawArea (M) -- (N) -- (B);
            \drawArea[red] (M) -- (N) -- (A);
            \tkzDefPointBy[projection=onto M--N](C) \tkzGetPoint{H}
            \draw[dotted,thick] (N) -- (H);
            \draw[dashed,thick] (C) -- (H);
            \tkzMarkRightAngle[blue](N,H,C)
            \drawTriangle
            \labelPoints
        }
    }{
        On a,
        d'après le \refsec{lem}{des bases}
        \begin{align*}
            \frac{\A_{ACM}}{\A_{ABC}} = \frac{AM}{AB}
            \iet \frac{\A_{ABN}}{\A_{ABC}} = \frac{AN}{AC}
            \ior \A_{ACM} = \A_{ABN}
            \ialors \frac{AM}{AB} = \frac{AN}{AC}
        \end{align*}
    }[0.45]
}[\href{https://le-castillon-le-pieux.college.ac-normandie.fr/IMG/pdf/Thales_-_Demonstrations.pdf}{Collège Le Castillon}]

\subsection{Quelques paradoxes sur les  aires et longueurs dans le plan}

\act{Curvica}{
    Une figure peut avoir une aire plus petite qu'une autre figure mais tous de même avoir un périmètre plus grand et vice-versa.
}[\href{https://www.educmat.fr/categories/jeux_reflexion/fiches_jeux/curvica/index.php}{éducmat}]

\rmk{Aire finie et périmètre infini}{
    Certaines figures ont une aire finie et un périmètre infini (ex: \href{https://mathcurve.com/fractals/koch/koch.shtml}{Flocon de Koch}).
}[\href{https://mathcurve.com/fractals/koch/koch.shtml}{Robert FERRÉOL}]

\section{Mesure dans l'espace}
\subsection{Définition de l'aire latérale}

\df{Aire latérales}{
    L'\textbf{aire latérale} \A{} d'un solide est la mesure des surface délimitant le solide privée de ses bases.
}

\rmk{Aire totale}{
    Il faut distingué l'aire latérale de l'\textbf{aire totale} qui elle prend en compte aussi les bases du solide.
}

\subsection{Définition du volume d'une partie de l'espace}

\subsubsection{Contenance}
\df{Contenance}{
    La \textbf{contenance} d'un solide est la mesure de quantité de liquide qui peut être contenue dans ce dernier. 
}

\df{Unité de contenance}{
    L'\textbf{unité de contenance} usuelle est le mètre litre (\Lt)\\
    % 1 \mt{} correspond à la mesure d'espace d'un cube de côté 1 $\meter$.
}

\rmk{Unités de contenance consécutives}{
    Deux unités de contenance consécutives sont 10 fois plus grande ou petites les unes par rapport aux autres.
}

\subsubsection{Définition générale}

\df{Volume}{
    Le \textbf{volume} \V{} d'un solide est la mesure de sa partie d'espace.
}

\df{Unité de volume}{
    Le volume se mesure en \textbf{unité de volume} $\uv = \ul^3$ (de manière usuelle en mètre cube \mt).\\
    1 \uv{} correspond à la mesure d'espace d'un cube de côté 1 $\ul$.
}

\rmk{Unités de volume consécutives}{
    Deux unités de volume consécutives sont 1000 fois plus grande ou petites les unes par rapport aux autres.
}

\rmk{Conversion contenance et volume}{
    On a : $1\Lt = 1\deci\md$.
}

\pr{Isométrie dans l'espace}{
    Les volumes sont invariants par isométrie.
}

\pr{Homothétie dans l'espace}{
    Pour une homothétie de rapport $k$ les volumes sont multiplié par $|k|^3$.
}

\rmk{3e problème de Hilbert}{
    On ne peut pas toujours découper et recoller un polyèdre en un autre polyèdre de même aire.
}[\href{https://fr.wikipedia.org/wiki/Probl\%C3\%A8mes\_de\_Hilbert}{Wikipedia}]

\subsubsection{Utilisation du calcul intégral}

\pr{Volume d'un solide}{
    Soit un solide de tranche $\mathcal{S}(z)$ à la hauteur $z$ compris entre les hauteurs $a$ et $b$.
    On a:
    \begin{equation*}
        \V = \int_{a}^{b} \mathcal{S}(z) dz
    \end{equation*}
}[\href{https://www.cpmath.fr/cours/int.pdf}{R\&T Saint-Malo}]

\pr{Volume d'un solide de révolution}{
    Soit un solide de révolution délimité par une courbe $y=f(x)$.
    Son volume entre $x=a$ et $x=b$ est:
    \begin{equation*}
        \V = \pi \int_{a}^{b} f(x)^2 dx
    \end{equation*}
}[\href{https://www.nagwa.com/fr/explainers/103158132069/}{Nagwa}]

\demo{}{
    La section perpendiculaire à l'axe de rotation est un disque de rayon $R = f(x)$,
    donc d'aire $\A(x) = \pi f(x)^2$ et $\V = \V = \int_{a}^{b} \A(x) dx$.
}

\subsection{Formules pour quelques parties remarquables}

\pr{Aire et volume du pavé droit}{
    Pour un pavé droit de longueur $L$,
    largeur $l$ et hauteur $h$,
    on a:
    \begin{align*}
        \A &= h \times 2 (L+l)\\
        \V &= h \times L \times l
    \end{align*}
}

\cor{Aire et volume du cube}{
    Pour un cube de côté $a$.
    on a:
    \begin{align*}
        \A &= 4a^2\\
        \V &= a^3
    \end{align*}
}

\pr{Aire et volume du prisme et du cylindre}{
    Pour un prisme ou cylindre de hauteur $h$,
    de base d'aire \B{} et périmètre \Per{},
    on a:
    \begin{align*}
        \A &= \Per \times h\\
        \V &= \B \times h
    \end{align*}
}

\pr{Aire et volume de la pyramide et du cône}{
    Pour une pyramide ou cône de hauteur $h$,
    de base d'aire \B{} et périmètre \Per{},
    on a:
    \begin{align*}
        \V &= \frac{\B \times h}{3}
    \end{align*}
}

\demo{}{
    L'intersection d'un plan parallèle au plan de la base avec le solide (pyramide ou cône) à une hauteur $t\in[0;h]$,
    a une aire $\B_t = \B \frac{(h-t)^2}{h^2}$ (homothétie de rapport $\frac{(h-t)}{h}$).
    On a alors:
    \begin{align*}
        \V &= \int_{0}^{h} \B_t dt\\ 
        &= \int_{0}^{h} \B \frac{(h-t)^2}{h^2} dt = \frac{\B}{h^2} \int_{0}^{h} (h-t)^2 dt\\
        &= \frac{\B}{h^2} \int_{h}^{0} u^2 (-du) \textrm{par changement de variable} u = h-t \et \alors du = -dt\\
        &= \frac{\B}{h^2} \int_{0}^{h} u^2 du = \frac{\B}{h^2} \times h^3 = \frac{\B \times h}{3}
    \end{align*}
}[\href{https://www.unige.ch/semainedesmaths/files/2715/0347/5030/PO-Le_volume_de_la_pyramide.pdf}{Université de Genève}]

\pr{Aire et volume d'une sphère}{
    L'aire \A{} et le volume \V{} d'une shère de rayon $R$ sont donnée par le formules :
    \begin{align*}
        \A = 4\pi R^2\\
        \V = \frac{4\pi R^3}{3}
    \end{align*}
}

\demo{}{
    Considérons les coordonnées sphériques $(r, \theta, \phi)$ où $r$ est le rayon,
    $\theta$ est l'angle azimutal,
    et $\varphi$ est l'angle polaire.\\
    % Les relations entre les coordonnées cartésiennes et sphériques sont:
    % \begin{align*}
    %     \lfbrace{x &= r\cos(\theta)\sin(\varphi)\\
    %     y &= r\sin(\theta)\sin(\varphi)\\
    %     z &= r\cos(\theta)}
    % \end{align*}
    On considère l'élément de volume $dV = dudvdw$ avec $(u,v,w)$ un repère local au point tel que:
    \begin{align*}
        \lfbrace{du &= dr\\
        dv &= rd\theta\\
        dw &= r\sin(\theta)d\varphi}
    \end{align*}
    % L'élément d'aire d'un cercle découpe de la sphère est donnée par :
    % $dxdy = d\mathcal{S} = r dr d\theta$ par la formule de longueur d'arc
    \begin{center}
        \def\angle{30} % Define the angle size
        \def\r{4}
        \def\dr{\r*0.75}
        \begin{tikzpicture}
            \tkzDefPoint(0,0){A}
            \tkzDefPoint(\r,0){B}
            \tkzDefPoint(\dr,0){R}
            \tkzDefShiftPoint[A](\angle:\r){C} 
            \tkzDefShiftPoint[A](\angle:\dr){c} 
            \draw[very thick] (B)--(A)--(C);
            \tkzDrawArc(A,B)(C) % Draw arc from B to C centered at A
            \tkzDrawArc(A,R)(c) % Draw arc from B to C centered at A
            % %
            \tkzMarkAngle[size=0.7cm,opacity=1](B,A,C) % Mark angle BAC
            \tkzLabelAngle[pos=1](B,A,C){$d\theta$} % Label angle BAC
            % %
            \tkzLabelSegment[above](A,C){$r$} 
            \tkzLabelSegment[Red][below](R,B){$dr$}
            \tkzLabelArc[right](A,B,C){$rd\theta$} % Label the arc from B to C as rθ
            \drawArea[red] (B) arc (0:30:\r) -- (c) arc (30:0:\dr) -- cycle;
            \node[Red] at (barycentric cs:B=1,C=1,c=0.75,R=0.75) {$d\mathcal{S}$};
            \draw[Red] (R) -- (B);
        \end{tikzpicture}
    \end{center}
    On a alors:
    \begin{align*}
        d\V &= r^2 \sin(\theta) dr d\theta d\varphi\\
        \ialors \A &= \int_{0}^{2\pi} \int_{0}^{\pi} R^2 \sin(\theta) d\theta d\varphi\\
        &= \int_{0}^{2\pi} 2R^2 d\varphi
        = 4\pi R^2\\
        \iet \V &= \int_{0}^{R} 4\pi r^2 dr
        = \frac{4\pi R^3}{3}
    \end{align*}
}[\href{https://uel.unisciel.fr/chimie/strucmic/strucmic_ch03/co/apprendre_ch03_1_06.html}{Unisciel}]