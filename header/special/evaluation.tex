% Helper command to add rows to the table
\def\evaluationRow#1/#2!{\ifthenelse{\equal{#2}{0}}{\bonus }{}#1 &
    \ifthenelse{\equal{#2}{0}}{}{\qquad/ #2}
    \addtocounter{evaluationTotal}{#2}\\ \hline
}

% Command to generate the sequence evaluation table
\newcommand{\seqEvaluation}[3]{ % 1: Sequence number, 2: Title, 3: Competences
    \renewcommand{\arraystretch}{1.2}
    \renewcommand*\do[1]{\evaluationRow##1!}
    \begin{seqEvaluationBox}{#1}{#2}
        \begin{center}
            \begin{tabular}{p{0.83\linewidth}|C{0.1\linewidth}} % Table column widths
                \hline
                \docsvlist{#3} % Process the list of competencies and notes
            \end{tabular}
        \end{center}
    \end{seqEvaluationBox}
}

\def\evalutionTotal{
    \begin{evaluationBox}
        \begin{flushright}
            / \theevaluationTotal
        \end{flushright}
        
    \end{evaluationBox}
}

\NewDocumentCommand{\evalutionEnd}{O{3} O{2}}{
    \seqEvaluation{}{Compétences générales}{
        Écrire ses calculs
        /#1,
        Rédiger des phrases réponses
        /#2
    }
    \evalutionTotal
    \vspace{-1.5cm}
}